# Онлайн-библиотека музыкальных композиций
## Содержание

[Введение](#введение)

1 [Описание предметной области](#предметная_область)

1.1 [Проблематика](#проблематика)

1.2 [Цели и задачи](#цели_и_задачи)

1.3 [Варианты решения проблем](#решение)

2 [Сравнительный анализ существующих решений](#анализ)

3. [Этап разработки](#разработка)

3.1 [Этап проектирования](#проектирование)

3.2 [Этап реализации](#реализация)

4 [Тестирование](#тестирование)

[Заключение](#заключение)

[Список источников и использованной литературы](#список_источников)


***

## Введение <a name="введение"></a>
Темой проекта является информационная система "Музыкальная библиотека", которая будет использоваться для прослушивания музыкальных композиций, их поиска, просмотра информации об авторах, все эти возможности будут включены в подписку. Музыка является неотъемлемой интересом в жизни почти каждого человека, поэтому удобство при её прослушивании требует современных решений. Так как звуковые аналоговые носители давно устарели - музыкальная онлайн-библиотека является самым оптимальным и комфортным решением для обладателей современной техники.[1]

***

## 1 Описание предметной области <a name="предметная_область"></a>
Посетитель сайта имеет возможность оформить подписку для получения доступа ко всем возможностям музыкальной онлайн-библиотеки. При оформлении подписки пользователь вносит реквизиты для оплаты, подтвержадет оплату подписки, после чего с его счёта списывается сумма, равная стоимости подписки. Далее при получении доступа у пользователя есть возможность выбрать необходимый ему пункт меню: добавить в избранное музыкальную композицию или исполнителя, составить набор плейлистов, оставить отзыв на прослушанную композицию или на исполнителя этой композиции, а также при необходимости отказаться от подписки. 

Автор музыкальных композиций может подать заявку на загрузку своих композиций и посмотреть статистику уже имеющихся на сатйе своих музыкальных произведений. При подачи заявки на загрузку своего творчества, автору необходимо будет дождаться подтверждения или отказа на данное действие. Просмотр статитстики включает в себя просмотр количества прослушиваний определённой композиции автора и рейтинга в чартах, на котрые влияет также оставленные пользователем отзывы.

Администратор сиситемы отвечает на заявки авторов на загрузку музыкальных композиций и составляет чарты. При просмотре заявок администратор может дать соглашение на загрузку и может отказать. Составление чартов администраром производится на основании статистики определённой композиции или исполнителя.[2]
***
## 1.1 Проблематика <a name="проблематика"></a>
Использование современных решений при поиске удобного сайта для прослушивания музыки в повседневной жизни может привести к его затруднительному выбору из уже имеющихся. Критерии при выборе могут быть различные, но удобство, простота и многофункциональность являются основными запросами. Поэтому создать качественную и комфортную для использования информационную систему очень важно для привлечения как её пользователей, так и авторов музыкальных композиций, находящихся в поисках надёжной платформы для размещения на ней своих работ.
Пользователи находятся в постоянном поиске удобной именно для их пользования музыкальной онлайн-библиотеки. Этот поиск происходит путём сравнения с существующими сайтами, количеством музыкальных работ и исполителей, представленных на них. Для авторов необходимым критерием также является безопасность и доверие к их авторским правам и возможностью делиться своим творчеством.[3]
***
## 1.2 Цели и задачи <a name="цели_и_задачи"></a>
Целью проекта является создание информационной ситстемы онлайн-библиотеки музыкальных композиций, которая станет удобной и комфортной для любого посетителя сайта и которая сможет заинтересовать его своей оптимальностью.

Задачи проекта.
1. Простота и удобство трансляции информации.
2. Демонстрация функций, которые подойдут для любого пользователя, которого интересует любой жанр музыки, исполнитель.
3. Выражение возможностей для использования сайта авторами при желании поделиться своим творчеством.
***
## 1.3 Варианты решения проблем <a name="решение"></a>
Для того чтобы заинтересовать потенциального пользователя музыкальной онлайн-библиотеки, необходимо продемонстрировать функциональность работы сайта и возможности при поиске интересующих его исполнителей или музыкальных композиций. Это можно сделать путём иллюстрирования страниц авторов, обложек музыкальных произведений и альбомов, наличием изображений плейлистов. 

Следует также разместить информацию об авторах, включающую не только общие сведения, но ссылки на его социальные сети. Это поможет при поиске новой музыки или с более близким ознакомлением с информацией о своём любимом исполнителем и его жизнью. 

Преимущество данной информационной системы может заключаться и в обратной связи, которую получат авторы музыкальных композиций, при просмотре отзывов пользователей. А пользователи в свою очередь смогут оценивать творчество авторов, и их оценка будет также влиять на его продвижение в чартах.[4]
***
## 2 Сравнительный анализ существующих решений <a name="анализ"></a>
Как пример, рассматривается уже два существующих сайта потенциальных конкурентов - "deezer"[5] и "Musicram"[6], и они сравниваются с разрабатываемой информационной системой по нескольким критериям.

Таблица 1 - Сравнительный анализ существующих решений.
| Сайт | Критерий сравнения | Требование и соответствие ему |
|---|---|---|
|       | <center><i>Возможности прослушивания</i></center> | <center><i>Осуществлять прослушивания при выходе из приложения и с заблокированным экраном смартфона</i></center> |
| deezer | <center>Отстутствует возможности прослушивания музыки в экранном режиме</center> | <center>Не соответствует требованию</center> |
| Musicram | <center>Отсутствует прослушивание при выключенном экране</center> | <center>Не соответствует требованию</center> |
|       | <center><i>Устройство структуры</i></center> | <center><i>Осуществить доступность для понимания структуры, все необходимые сведения размещаются на главной странице</i></center> |
| deezer | <center>Имеется сложная структура, безграмотный подход к размещению точек доступа к пунктам меню</center> | <center>Не соответствует требованию</center> |
| Musicram | <center>Отстутствует необходимая для поиска композиций информация</center>  | <center>Не соответствует требованию</center> |
|       | <center><i>Интерфейс, дизайн</i></center> | <center><i>Осуществить выдержанность сайта в трёх основных неярких цветах, шрифт крупный, понятный, иллюстрации в высоком разрешении</i></center> |
| deezer | <center>Присутствует изобилие ярких цветов, режущих глаза</center> | <center>Не соответствует требованию</center> |
| Musicram | <center>Присутствуют изображения низкого качества, мелкий шрифт</center> | <center>Не соответствует требованию</center> |
|       | <center><i>Сведения об авторах</i></center> | <center><i>Предоставить полную информацию об авторах, доступная для просмотра пользователю</i></center> |
| deezer | <center>Присутствует неточная или неверная информация об авторах</center> | <center>Не соответствует требованию</center> |
| Musicram | <center>Отсутствует информация об авторах</center> | <center>Не соответствует требованию</center> |
|       | <center><i>Чарты</i></center> | <center><i>Составить чарты по различным критериям, осуществить предоставление точной информации </i></center> |
| deezer | <center>Отсутствуют чарты с точной информацией</center>  | <center>Не соответствует требованию</center> |
| Musicram | <center>Присутствуют чарты с устаревшей информацией</center>  | <center>Не соответствует требованию</center> |
|       | <center><i>Подписка</i></center> | <center><i>Осуществить приемлемость цены подписки и быстрого и удобного процесса оформления подписки</i></center> |
| deezer | <center>Присутствует завышенная стоимость подписки для обычного пользователя</center> | <center>Не соответствует требованию</center> |
| Musicram | <center>Отсутвует возможность оформления подписки</center> | <center>Не соответствует требованию</center> |

***
# 3 Этап разработки <a name="разработка"></a>

Разработка информационной системы состоит из двух этапов: проектирования и реализации. 
В проектировании информационной системы разрабатываем USE-CASE, BPMN и ER диаграммы. Они необходимы для графического описания участников бизнес-процесса, описания их действий в процессе и связей между собой внутри системы. 
Реализация информационной системы представляет собой готовый программный продукт с описанием его составляющих и текстом программного кода.

***
## 3.1 Этап проектирования <a name="проектирование"></a>
Разработка информационной системы начинается с проектирования диаграммы USE-CASE, которая отображает главные действующие лица данной системы: пользователь, автор, администратор (Рисунок 1).

<p align="center"><img src="https://user-images.githubusercontent.com/90765671/145006869-fc5ea3be-f5a2-472b-85c5-733814812f8f.png"></p>
<p align="center">Рисунок 1 - UseCase диаграмма</p>

На основе USE-CASE диаграммы разрабатывается BPMN (Business Process Management Notation - Нотация моделирования бизнес-процессов) диаграмма, которая представляет собой описание графических элементов, используемых для построения схемы протекания рабочего процесса и демонстрирует передачу информации внутри разрабатываемой системы (Рисунок 2).
<p align="center"><img src="https://user-images.githubusercontent.com/90765671/145006406-7274fc2e-4762-482d-9b71-3f732216bc86.png"></p>
<p align="center">Рисунок 2 - BPMN диаграмма</p>

На основе BPMN диаграммы разрабатывается ER-диаграмма - схема "сущность-связь", демонстрирующая объекты, людей, концепции, который связаны между собой внутри системы различными способами (Рисунок 3).
<p align="center"><img src="https://user-images.githubusercontent.com/90765671/145007223-5540da23-bfa6-439b-bdcd-e887c18a7439.png"></p>
<p align="center">Рисунок 3 - ER-диаграмма</p>

***
## 3.2 Этап реализации <a name="реализация"></a>
На основе ER-диаграммы создаём класс с указанием полей, параметров и типов данных для каждой сущности. Приведём пример создания класса для сущности Admin (Листинг 1):

Листинг 1 - Класс "Администатор"
```csharp
{
    public class Admin
    {
        public int Id { get; set; }
        public string Fullname { get; set; }
    }
}
```
Так же создаём классы для таких сущностей ER-диаграммы как Заявка, Исполнитель, Автор, Счёт, Клиент, Избранное, Прослушивания, Музыкальные чарты, Композиция, Статистика, Подписка.

Далее для каждой сущности создаём контроллеры с методами Create, Read, Update, Delite. Приведём пример создания контроллера для сущности Admin (Листинг 2):

Листинг 2 - Контроллер класса "Администатор"
```csharp 
{
    [ApiController]
    [Route("/admin")]
    public class AdminController : ControllerBase
    {
        [HttpPut]
        public Admin Create(Admin admin)
        {
            Storage.AdminStorage.Create(admin);
            return Storage.AdminStorage.Read(admin.Id);
        }

        [HttpGet]
        public Admin Read(int adminId)
        {
            return Storage.AdminStorage.Read(adminId);
        }

        [HttpPatch]
        public Admin Update(int adminId, Admin newAdmin)
        {
            return Storage.AdminStorage.Update(adminId, newAdmin);
        }

        [HttpDelete]
        public bool Delete(int adminId)
        {
            return Storage.AdminStorage.Delete(adminId);
        }
        [HttpGet("ApplicationAnswer")]
        public string ApplicationAnswer(string str)
        {
            return str; //метод ответа на заявки
        }

        [HttpGet("CreateCharts")]
        public string CreateCharts(string str)
        {
            return str; // метод составления чартов
        }

    }

}
```
Далее создаём контроллеры для отсавшихся классов: Заявка, Исполнитель, Автор, Счёт, Клиент, Избранное, Прослушивания, Музыкальные чарты, Композиция, Статистика, Подписка.

Затем создаём хранилище для каждого класса. Пример создания хранилища для класса Admin (Листинг 3):

Листинг 3 - Хранилище класса "Администратор"
```csharp
{
    public class AdminStorage
    {
        private Dictionary<int, Admin> Admins { get; } = new Dictionary<int, Admin>();
        //private SqlConnection Connection { get; } = new SqlConnection("Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;");
        //public AuthorStorage() => Connection.Open();

        public Admin Create(Admin admin)
        {
            Admins.Add(admin.Id, admin);
            return admin;
            //var command = Connection.CreateCommand();
            //command.CommandText = "SELECT * FROM .....";
            //command.ExecuteNonQuery
            //command.ExecuteReader
            //command.ExecuteScalar
        }

        public Admin Read(int adminId)
        {
            return Admins[adminId];
        }

        public Admin Update(int adminId, Admin newAdmin)
        {
            Admins[adminId] = newAdmin;
            return Admins[adminId];
        }

        public bool Delete(int adminId)
        {
            return Admins.Remove(adminId);
        }
    }
}
```

Таким же образом создаём хранилища для всех оставшися классов. После этого создаём общее хранилище (Листинг 4):

Листинг 4 - Общее хранилище
```csharp
{
    public static class Storage
    {
        public static AdminStorage AdminStorage { get; } = new AdminStorage();
        public static ApplicationStorage ApplicationStorage { get; } = new ApplicationStorage();
        public static ArtistStorage ArtistStorage { get; } = new ArtistStorage();
        public static AuthorStorage AuthorStorage { get; } = new AuthorStorage();
        public static BillStorage BillStorage { get; } = new BillStorage();
        public static ClientStorage ClientStorage { get; } = new ClientStorage();
        public static FavoritesStorage FavoritesStorage { get; } = new FavoritesStorage();
        public static ListeningStorage ListeningStorage { get; } = new ListeningStorage();
        public static MusicChartStorage MusicChartStorage { get; } = new MusicChartStorage();
        public static SongStorage SongStorage { get; } = new SongStorage();
        public static StatisticStorage StatisticStorage { get; } = new StatisticStorage();
        public static SubscriptionStorage SubscriptionStorage { get; } = new SubscriptionStorage();

    }
}
```

***
# 4 Тестирование <a name="тестирование"></a>
После запуска программы открывается страница Swagger UI со списком сущностей и возможных операций над ними (Рисунок 4).
<p align="center">
<p align="center"><img src="https://user-images.githubusercontent.com/90765671/146678698-4c4f9e9d-bb83-49ad-a2be-259fe9a16d40.png"></p>
<p align="center">Рисунок 4 - Cтраница Swagger UI</p> 

Далее проверяется работа методов CRUD (Create - создание, Read - чтение, Update - обновление, Delete - удаление) в сущности Admin (Рисунок 5).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146678948-659b4fa3-5b0e-4558-b7f3-9fad65925791.png"></p>
<p align="center">Рисунок 5 - Проверка работы методов CRUD в сущности Admin</p> 

1. Create добавляет новые строки в таблицу (Рисунок 6).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679071-f095fc28-7c20-4bc7-9811-7fef424f4a18.png"></p>
<p align="center">Рисунок 6 - Окно метода Create</p> 

Осуществляется ввод необходимых данных об Администраторе в соответствующие поля (рисунок 7).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146680369-1d646036-5bd6-4eba-98c8-bc9a92887e17.png"></p>
<p align="center">Рисунок 7 - Работа с методом Create</p> 
                 
После выполнения операции сервер выдаёт ответ (Рисунок 8).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679290-363ef9cd-60d1-4c8a-a8da-a6d61e7bf84a.png"></p>
<p align="center">Рисунок 8 - Результат выполнения операции Create</p> 
                 
2. Функция чтения Read имеет сходство с функцией поиска, так как позволяет извлекать определенные записи, считывать их значения (Рисунок 9).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679349-c85dba9e-6a0a-4631-b197-8c26bad36d7d.png"></p>
<p align="center">Рисунок 9 - Окно функции Read</p> 

Считывание информации об уже созданном Администраторе по его Id (Рисунок 10).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679416-afe6cc43-4c1d-4ec7-a5e5-e36053effb7a.png"></p>
<p align="center">Рисунок 10 - Работа с методом Read</p> 

После выполнения операции сервер выдаёт об Администраторе информацию, которая была занесена в методе Create (Рисунок 11).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679491-c4a73fc9-d534-4d38-82bc-52fb692c6355.png"></p>
<p align="center">Рисунок 11 - Результат выполнения операции Read</p> 

3. Функция редактирования записей Update предназначается для изменения существующих записей в базе данных (Рисунок 12).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679563-bd170bf5-1c9c-455b-9d3a-e38c2826d6c2.png"></p>
<p align="center">Рисунок 12 - Окно метода Update</p> 

Измениение информации об Администраторе. Для осуществления этого изменения сначала нужно ввести его Id и затем новые данные (рисунок 13).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679643-75f1f25b-cd59-4461-a7c4-86cf1bd649f6.png"></p>
<p align="center">Рисунок 13 - Работа с методом Update</p> 

После выполнения операции сервер выдаёт новую информацию об Администраторе (Рисунок 14).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679677-71439ab8-a73b-40f3-a925-1fd6a496508c.png"></p>
<p align="center">Рисунок 14 - Результат выполнения операции Update</p> 

Функция Read проверяет вышеуказанную операцию. После чего сервер выдает новую информацию об Администраторе (рисунок 15).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679770-5bc5a4bf-d27b-405f-9441-3081d4b09aba.png"></p>
<p align="center">Рисунок 15 - Результат выполнения операции Read после обновления данных</p> 

4. Функция Delete используется для удаления записи по Id. Если операция Delete срабатывает успешно, то ответ сервера будет "true", в противном случае - "false" (Рисунок 16).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679869-f4efa2b3-9145-448f-8073-45d869a63648.png"></p>
<p align="center">Рисунок 16 - Окно метода Delete</p> 

Удаление Администратора по его Id (Рисунок 17).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679911-93292a9d-75b1-48ad-8889-26377e2aa44d.png"></p>
<p align="center">Рисунок 17 - Работа с методом Delete</p> 

После выполнения операции удаления - ответ сервера (Рисунок 18).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146679940-c85a3f7d-9f2e-4033-98f2-4b4eab2ac44a.png"></p>
<p align="center">Рисунок 18 - Результат выполнения метода Delete</p> 

Проверка вышеописанного действия с помощью операции чтения Read. Считывается информацию об удалённом Администраторе (Рисунок 19).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146680000-e703dc56-a8bb-42e2-8eda-f25117232cdf.png"></p>
<p align="center">Рисунок 19 - Работа с операцией Read после операции удаления</p> 

После срабатывания операции Read программа не выдаёт информации об этом Администраторе (Рисунок 20).
<p align="center">
<img src="https://user-images.githubusercontent.com/90765671/146680091-2b8c57d5-9883-4648-8ec9-1dcd971dd664.png"></p>
<p align="center">Рисунок 20 - Результат выполнения операции Read после удаления данных</p>                
                 
***
## Заключение <a name="заключение"></a>
По окончании работы была создана информационная система "Музыкальная библиотека", которая осуществляет возможность прослушивания музыкальных композиций в онлайн режиме, ведения учёта пользователей по оформлению подписки, предоставления информации об авторах, размещения авторами своих композиций, ведение администратором чартов и их просмотра клиентами.

***
## Список источников и использованной литературы <a name="список_источников"></a>
[1] Аудиостриминг как новый вид музыкального интернет-вещания [Электронный ресурс] - Режим доступа: https://cyberleninka.ru/article/n/audiostriming-kak-novyy-vid-muzykalnogo-internet-veschaniya-na-primere-striming-servisa-soundcloud/viewer. - Дата доступа: 07.10.2021 
[2] Разработка базы данных медиаплеера для организации музыки [Электронный ресурс] - Режим доступа: https://habr.com/ru/post/517188/. - Дата доступа: 07.10.2021
[3] Музыкальные стриминговые сервисы как новый инструмент продвижения брендов [Электронный ресурс] - Режим доступа: https://cyberleninka.ru/article/n/muzykalnye-strimingovye-servisy-kak-novyy-instrument-prodvizheniya-brendov/viewer. - Дата доступа: 07.10.2021
[4] How To Create A Music Website [Электронный ресурс] - Режим доступа: https://createamusicwebsite.com/. - Дата доступа: 15.10.2021
[5] Deezer [Электронный ресурс] - Режим доступа: https://www.deezer.com/ru/. - Дата доступа: 17.10.2021 
[6] Musicram [Электронный ресурс] - Режим доступа: https://apps.apple.com/us/app/musicram-listen-music-player/id1444370634. - Дата доступа: 17.10.2021 
[7] Draw.io [Электронный ресурс]. – Режим доступа: https://app.diagrams.net/. – Дата доступа: 22.11.2021.
[8] PlantUML [Электронный ресурс]. – Режим доступа: https://plantuml.com/ru/. – Дата доступа: 26.11.2021.
[9] METANIT.COM [Электронный ресурс]. – Режим доступа: https://metanit.com/sharp/tutorial/3.1.php. – Дата доступа: 29.11.2021.
[10] METANIT.COM [Электронный ресурс]. – Режим доступа: https://metanit.com/sharp/tutorial/3.4.php. – Дата доступа: 30.11.2021.
[11] JournalDev [Электронный ресурс]. – Режим доступа: https://www.journaldev.com/16774/sql-data-types. – Дата доступа: 30.11.2021.

***
